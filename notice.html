<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ê³µì§€ì‚¬í•­ | ê¹€êµ° ê°œì¸íƒì‹œ ìƒë‹´ì†Œ</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Header (script.jsê°€ ìë™ ì‚½ì…) -->
  <div id="header"></div>

  <!-- Hero Section -->
  <section class="notice-hero">
      <img src="ê³µì§€ì‚¬í•­.jpeg" class="hero-bg">

      <div class="overlay"></div>

      <div class="hero-inner">
        <h1>ê³µì§€ì‚¬í•­</h1>
        <p>ê¹€êµ° ê°œì¸íƒì‹œ ìƒë‹´ì†Œì˜ ì£¼ìš” ì†Œì‹ê³¼ ì•ˆë‚´ ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”.</p>
      </div>
  </section>


  <!-- ê´€ë¦¬ì ë¡œê·¸ì¸ ë°•ìŠ¤ -->
  <section id="adminLoginSection" style="display:none; margin-top:30px;">
    <div class="container">
      <div class="admin-login-box card">
        <h3>ê´€ë¦¬ì ë¡œê·¸ì¸</h3>
        <input type="password" id="adminPassword" placeholder="ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" />
        <button id="adminLoginBtn" class="btn">ë¡œê·¸ì¸</button>
        <p id="loginMsg" style="color:red; margin-top:10px;"></p>
      </div>
    </div>
  </section>


  <!-- ê³µì§€ ë¦¬ìŠ¤íŠ¸ -->
  <section class="notice-section">
    <div class="container" id="noticeContainer">

      <!-- ê³µì§€ ì—†ìŒ í‘œì‹œ -->
      <div class="no-notice fade-up" id="noNoticeBox" style="display:none;">
        <h3>ì•„ì§ ë“±ë¡ëœ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤</h3>
        <p>ìƒˆë¡œìš´ ì†Œì‹ì´ ë“±ë¡ë˜ë©´ ì´ê³³ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
      </div>

      <!-- ê³µì§€ ë¦¬ìŠ¤íŠ¸ ì¶œë ¥ -->
      <div id="noticeList"></div>

      <!-- ê´€ë¦¬ì ëª¨ë“œ: ê³µì§€ ì‘ì„± -->
      <div id="adminWriteSection" style="display:none; margin-top:40px;">
        <div class="card">
          <h3>ğŸ“Œ ìƒˆ ê³µì§€ ì‘ì„±</h3>
          <input type="text" id="newTitle" placeholder="ê³µì§€ ì œëª©" />
          <textarea id="newContent" placeholder="ê³µì§€ ë‚´ìš©"></textarea>
          <button id="saveNoticeBtn" class="btn">ê³µì§€ ë“±ë¡</button>
        </div>
      </div>

    </div>
  </section>


  <!-- Footer (script.jsê°€ ìë™ ì‚½ì…) -->
  <div id="footer"></div>


  <!-- ê³µí†µ script.js -->
  <script src="script.js"></script>


  <!-- Notice ì „ìš© ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    /* ===============================
        ê´€ë¦¬ì ëª¨ë“œ ì—¬ë¶€
    =============================== */
    const params = new URLSearchParams(window.location.search);
    const isAdminMode = params.get("admin") === "1";

    if (isAdminMode) {
      document.getElementById("adminLoginSection").style.display = "block";
    }

    /* ===============================
        ê³µì§€ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
    =============================== */
    let noticeData = JSON.parse(localStorage.getItem("taxi_notice")) || [];
    let isLoggedIn = false;

    /* ===============================
        ê³µì§€ ë Œë”ë§ í•¨ìˆ˜
    =============================== */
    function renderNotice() {
      const listDiv = document.getElementById("noticeList");
      const noBox = document.getElementById("noNoticeBox");

      listDiv.innerHTML = "";

      if (noticeData.length === 0) {
        noBox.style.display = "block";
      } else {
        noBox.style.display = "none";
      }

      noticeData.forEach((n, i) => {
        listDiv.innerHTML += `
          <div class="notice-card fade-up">
            <h3>${n.title}</h3>
            <p>${n.content.replace(/\n/g, "<br>")}</p>
            <span class="date">${n.date}</span>

            ${isLoggedIn ? `
              <div class="admin-btns" style="margin-top:10px;">
                <button onclick="editNotice(${i})" class="btn small">ìˆ˜ì •</button>
                <button onclick="deleteNotice(${i})" class="btn small red">ì‚­ì œ</button>
              </div>` : ""}
          </div>
        `;
      });

      // fade-up ì ìš©
      document.querySelectorAll(".fade-up").forEach(el => {
        setTimeout(() => el.classList.add("visible"), 120);
      });
    }


    /* ===============================
        ê´€ë¦¬ì ë¡œê·¸ì¸
    =============================== */
    const adminPassword = "taxi9156";

    document.getElementById("adminLoginBtn")?.addEventListener("click", () => {
      const inputPw = document.getElementById("adminPassword").value;

      if (inputPw === adminPassword) {
        isLoggedIn = true;
        document.getElementById("adminLoginSection").style.display = "none";
        document.getElementById("adminWriteSection").style.display = "block";
        renderNotice();
      } else {
        document.getElementById("loginMsg").textContent = "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
      }
    });


    /* ===============================
        ê³µì§€ ì €ì¥
    =============================== */
    document.getElementById("saveNoticeBtn")?.addEventListener("click", () => {
      const title = document.getElementById("newTitle").value.trim();
      const content = document.getElementById("newContent").value.trim();

      if (!title || !content) return alert("ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.");

      noticeData.unshift({
        title,
        content,
        date: new Date().toISOString().slice(0, 10)
      });

      localStorage.setItem("taxi_notice", JSON.stringify(noticeData));
      renderNotice();
    });


    /* ===============================
        ê³µì§€ ì‚­ì œ
    =============================== */
    function deleteNotice(idx) {
      if (!confirm("ì •ë§ ì‚­ì œí• ê¹Œìš”?")) return;
      noticeData.splice(idx, 1);
      localStorage.setItem("taxi_notice", JSON.stringify(noticeData));
      renderNotice();
    }


    /* ===============================
        ê³µì§€ ìˆ˜ì •
    =============================== */
    function editNotice(idx) {
      const target = noticeData[idx];
      const newTitle = prompt("ìƒˆ ì œëª© ì…ë ¥", target.title);
      const newContent = prompt("ìƒˆ ë‚´ìš© ì…ë ¥", target.content);

      if (!newTitle || !newContent) return;

      noticeData[idx] = {
        ...target,
        title: newTitle,
        content: newContent
      };

      localStorage.setItem("taxi_notice", JSON.stringify(noticeData));
      renderNotice();
    }


    /* ì´ˆê¸° ë Œë”ë§ */
    renderNotice();
  </script>

</body>
</html>
