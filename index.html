<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ê¹€êµ°ê°œì¸íƒì‹œ ìƒë‹´ì†Œ</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <style>
    .toggle-buttons {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 20px;
    }
    .toggle-buttons button {
      padding: 10px 24px;
      border-radius: 30px;
      border: none;
      font-weight: bold;
      cursor: pointer;
      background: #ddd;
      transition: 0.3s;
    }
    .toggle-buttons button.active {
      background: #ffb300;
      color: white;
      box-shadow: 0 3px 8px rgba(0,0,0,0.2);
    }
    #formContent {
      transition: opacity 0.3s ease;
    }
  </style>
</head>
<body>
  <div id="header"></div>

  <!-- ğŸ¥ Hero ì˜ìƒ -->
  <section class="hero">
    <video autoplay muted loop playsinline class="bg-video">
      <source src="ê´‘ì•ˆë¦¬ íƒì‹œ.mp4" type="video/mp4" />
      ë¸Œë¼ìš°ì €ê°€ ì˜ìƒì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    </video>
    <div class="overlay"></div>
    <div class="hero-text">
      <h1>NO.1 í”„ë¦¬ë¯¸ì—„ ê°œì¸íƒì‹œ ì–‘ë„Â·ì–‘ìˆ˜ ì¤‘ê°œì†Œ</h1>
      <p>ê¹€êµ°ê°œì¸íƒì‹œ ìƒë‹´ì†Œì™€ í•¨ê»˜í•˜ì„¸ìš”</p>
      <a href="#consult" class="btn consult">ìƒë‹´í•˜ê¸°</a>
    </div>
  </section>

  <!-- ğŸ“ ìƒë‹´ ì‹ ì²­ -->
  <section id="consult" class="consult-section">
    <div class="container">
      <div class="form-area">
        <h2>ğŸ“„ ìƒë‹´ ì‹ ì²­</h2>

        <!-- âœ… ì–‘ë„/ì–‘ìˆ˜ ì„ íƒ ë²„íŠ¼ -->
        <div class="toggle-buttons">
          <button id="btnSell" class="active">ì–‘ë„ ì‹ ì²­</button>
          <button id="btnBuy">ì–‘ìˆ˜ ì‹ ì²­</button>
        </div>

        <form id="consultForm">
          <div id="formContent"></div>

          <div class="captcha-box">
            <input type="text" id="captchaInput" placeholder="ìŠ¤íŒ¸ ë°©ì§€ ì½”ë“œ ì…ë ¥" />
            <div class="captcha-code" id="captchaText">e8hre</div>
          </div>

          <label class="privacy">
            <input type="checkbox" required /> ê°œì¸ì •ë³´ ìˆ˜ì§‘ì— ë™ì˜í•©ë‹ˆë‹¤
          </label>

          <button type="submit" class="btn submit">ìƒë‹´ ì‹ ì²­</button>
          <p id="submitMsg" style="margin-top:10px;font-weight:bold;"></p>
        </form>
      </div>

      <div class="list-area">
        <h2>ğŸ“Œ ì‹¤ì‹œê°„ ìƒë‹´ ë‚´ì—­</h2>
        <div class="scroll-list">
          <ul id="fakeList">
            <li>âœ… 11ì›” 04ì¼ | ìµœ**ë‹˜ | ìƒë‹´ì¤‘</li>
            <li>âœ… 11ì›” 04ì¼ | ì˜¤**ë‹˜ | ìƒë‹´ì¤‘</li>
            <li>âœ… 11ì›” 04ì¼ | ê¹€**ë‹˜ | ìƒë‹´ì™„ë£Œ</li>
            <li>âœ… 11ì›” 03ì¼ | ì´**ë‹˜ | ìƒë‹´ì¤‘</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <div id="footer"></div>

  <script>
    // âœ… header/footer ìë™ì‚½ì…
    window.addEventListener("load", () => {
      fetch("header.html")
        .then(res => res.text())
        .then(html => (document.querySelector("#header").innerHTML = html));

      fetch("footer.html")
        .then(res => res.text())
        .then(html => (document.querySelector("#footer").innerHTML = html));
    });

    // âœ… EmailJS ì´ˆê¸°í™”
    (function() {
      emailjs.init("2iseJXtljrKVXtYDP"); // â† Public Key ì…ë ¥
    })();

    const formArea = document.getElementById("formContent");
    const btnSell = document.getElementById("btnSell");
    const btnBuy = document.getElementById("btnBuy");
    const msg = document.getElementById("submitMsg");

    // âœ… ì–‘ë„ ì‹ ì²­ í¼
    const sellForm = `
      <input type="hidden" id="type" value="ì–‘ë„ ì‹ ì²­" />
      <input type="text" id="name" placeholder="ì´ë¦„" required />
      <input type="text" id="phone" placeholder="ì—°ë½ì²˜ (ì˜ˆ: 010-0000-0000)" required />
      <input type="text" id="carModel" placeholder="ì°¨ëŸ‰ëª¨ë¸ëª…" required />
      <input type="text" id="carNumber" placeholder="ì°¨ëŸ‰ë²ˆí˜¸ (ì˜ˆ: 36ë°”1234)" required />
      <input type="text" id="year" placeholder="ì—°ì‹ (ì˜ˆ: 21ë…„4ì›”)" />
      <input type="text" id="km" placeholder="í‚¤ë¡œìˆ˜ (ì˜ˆ: 50000)" />
      <input type="text" id="region" value="ë¶€ì‚°" readonly />
    `;

    // âœ… ì–‘ìˆ˜ ì‹ ì²­ í¼
    const buyForm = `
      <input type="hidden" id="type" value="ì–‘ìˆ˜ ì‹ ì²­" />
      <input type="text" id="name" placeholder="ì´ë¦„" required />
      <input type="text" id="phone" placeholder="ì—°ë½ì²˜ (ì˜ˆ: 010-0000-0000)" required />
      <input type="text" id="region" value="ë¶€ì‚°" readonly />
      <select id="training">
        <option value="ë¯¸ì™„ë£Œ">ì–‘ìˆ˜ìêµìœ¡ ë¯¸ì™„ë£Œ</option>
        <option value="ì™„ë£Œ">ì–‘ìˆ˜ìêµìœ¡ ì™„ë£Œ</option>
      </select>
    `;

    // âœ… ì´ˆê¸° ì–‘ë„ ì‹ ì²­ í¼ í‘œì‹œ
    formArea.innerHTML = sellForm;

    // âœ… í¼ ì „í™˜
    btnSell.addEventListener("click", () => {
      btnSell.classList.add("active");
      btnBuy.classList.remove("active");
      formArea.style.opacity = 0;
      setTimeout(() => {
        formArea.innerHTML = sellForm;
        formArea.style.opacity = 1;
      }, 150);
      msg.textContent = "";
    });

    btnBuy.addEventListener("click", () => {
      btnBuy.classList.add("active");
      btnSell.classList.remove("active");
      formArea.style.opacity = 0;
      setTimeout(() => {
        formArea.innerHTML = buyForm;
        formArea.style.opacity = 1;
      }, 150);
      msg.textContent = "";
    });

    // âœ… í¼ ì „ì†¡
    document.getElementById("consultForm").addEventListener("submit", function(e) {
      e.preventDefault();
      msg.textContent = "";

      const captchaInput = document.getElementById("captchaInput").value.trim();
      const captchaText = document.getElementById("captchaText").textContent.trim();
      if (captchaInput !== captchaText) {
        msg.textContent = "âŒ ìŠ¤íŒ¸ ë°©ì§€ ì½”ë“œê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
        msg.style.color = "red";
        return;
      }

      const type = document.getElementById("type").value;
      const params = {
        title: `${type}`,
        name: document.getElementById("name").value,
        phone: document.getElementById("phone").value
      };

      if (type === "ì–‘ë„ ì‹ ì²­") {
        params.message = `
          [${type}]
          ì´ë¦„: ${document.getElementById("name").value}
          ì—°ë½ì²˜: ${document.getElementById("phone").value}
          ì°¨ëŸ‰ëª¨ë¸ëª…: ${document.getElementById("carModel").value}
          ì°¨ëŸ‰ë²ˆí˜¸: ${document.getElementById("carNumber").value}
          ì—°ì‹: ${document.getElementById("year").value}
          í‚¤ë¡œìˆ˜: ${document.getElementById("km").value}
          ì§€ì—­: ë¶€ì‚°
        `;
      } else {
        params.message = `
          [${type}]
          ì´ë¦„: ${document.getElementById("name").value}
          ì—°ë½ì²˜: ${document.getElementById("phone").value}
          ì§€ì—­: ë¶€ì‚°
          ì–‘ìˆ˜ìêµìœ¡: ${document.getElementById("training").value}
        `;
      }

      // âœ… EmailJS ì „ì†¡
      emailjs.send("service_kimtaxi", "template_4yu2gna", params)
        .then(() => {
          msg.textContent = "âœ… ìƒë‹´ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.";
          msg.style.color = "green";
          document.getElementById("consultForm").reset();
          document.getElementById("captchaInput").value = "";
        })
        .catch((error) => {
          msg.textContent = "âš ï¸ ì „ì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
          msg.style.color = "red";
          console.error("EmailJS Error:", error);
        });
    });
  </script>
</body>
</html>
